import{bM as b,r as f,j as J,dd as O}from"./index-CJzBCe4p.js";const P=(s,l)=>JSON.stringify({a:s})===JSON.stringify({a:l}),H=(s,l)=>{const c=b.Children.map(s,t=>t.key),i=b.Children.map(l,t=>t.key);if(c.length!==i.length)return!1;for(let t=0;t<c.length;t++)if(c[t]!==i[t])return!1;return!0},w=({settings:s,onClick:l,onIndexChanged:c,onTransitionStart:i,onTransitionEnd:t,onTouchStart:m,onTouchMove:p,onTouchEnd:S,onInit:d,className:k,style:v,children:a})=>{const n=f.useRef(null),[e,C]=f.useState(null),[E,h]=f.useState(s),[j,N]=f.useState(a);let o=!1,y=0;const g=(r={})=>{if(e&&e.destroy&&e.rebuild)e.destroy(),e.rebuild();else{if(n.current==null)return;const u={...r,container:n.current,onInit:()=>x()};if(C(O.tns(u)),!e)return;n.current&&(n.current.className+=" tns-item")}},x=()=>{if(!e)return y>=4?d==null?void 0:d(!1):(y++,setTimeout(x,100));y=0;const{events:r}=e;r&&(r.on("transitionStart",u=>{o=!0,i==null||i(u)}),r.on("transitionEnd",u=>{o=!1,t==null||t(u)}),c&&r.on("indexChanged",c),m&&r.on("touchStart",m),p&&r.on("touchMove",p),S&&r.on("touchEnd",S)),d==null||d(!0)};f.useEffect(()=>{g(s)},[s]),f.useEffect(()=>{(!P(s,E)||!H(a,j))&&g(s),h(s),N(a)},[s,a]),f.useEffect(()=>()=>{e&&e.destroy&&e.destroy()},[]);const R=r=>{if(o||!l)return;if(!e)return l(null,null,r);const u=e.getInfo(),q=u.slideItems[u.index];l(q,u,r)};return J.jsx("div",{ref:n,onClick:R,className:k,style:v,children:a})};export{w as T};
