import{r as t}from"./index-Zv8orDLd.js";const C=t.createContext(null),E=()=>t.useContext(C),L=t.memo(({header:u,footer:p,children:l,onStepChange:n,wrapper:a,startIndex:b=0})=>{const[r,i]=t.useState(b),[x,d]=t.useState(!1),o=t.useRef(!0),v=t.useRef(!1),s=t.useRef(()=>{}),c=t.Children.toArray(l).length;o.current=r<c-1,v.current=r>0;const S=t.useCallback(()=>{if(o.current){const e=r+1;i(e),n==null||n(e)}},[r,n]),m=t.useCallback(()=>{if(v.current){s.current=null;const e=r-1;i(e),n==null||n(e)}},[r,n]),w=t.useCallback(e=>{e>=0&&e<c&&(s.current=null,i(e),n==null||n(e))},[c,n]),k=t.useRef(e=>{s.current=e}),A=t.useCallback(async()=>{if(o.current&&s.current)try{d(!0),await s.current(),d(!1),s.current=null,S()}catch(e){throw d(!1),e}else S()},[S]),y=t.useMemo(()=>({nextStep:A,previousStep:m,handleStep:k.current,isLoading:x,activeStep:r,stepCount:c,isFirstStep:!v.current,isLastStep:!o.current,goToStep:w}),[A,m,x,r,c,w]),f=t.useMemo(()=>t.Children.toArray(l)[r],[r,l,u,p]),z=t.useMemo(()=>a?t.cloneElement(a,{children:f}):f,[a,f]);return t.createElement(C.Provider,{value:y},u,z,p)});export{L as W,E as u};
