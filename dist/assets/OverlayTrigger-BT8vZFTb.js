import{cH as q,d4 as J,r as a,cZ as X,c_ as ee,cU as te,d5 as B,d6 as ne,d7 as se,bF as N,j as p,bG as P,cQ as K,d8 as H,cO as G,cR as oe,cP as ae,d9 as $,da as S,cy as re,db as le,cY as ce,cG as ie}from"./index-CJzBCe4p.js";import"./warning-LG9o13RO.js";import{a as ue}from"./hook-DxvfZIb0.js";import{b as de,g as fe,u as I,a as he,m as me}from"./mergeOptionsWithPopperConfig-B3kESI1j.js";const ve=()=>{};function pe(e,n,{disabled:t,clickTrigger:s}={}){const o=n||ve;de(e,o,{disabled:t,clickTrigger:s});const l=q(c=>{J(c)&&o(c)});a.useEffect(()=>{if(t||e==null)return;const c=X(fe(e));let m=(c.defaultView||window).event;const u=ee(c,"keyup",f=>{if(f===m){m=void 0;return}l(f)});return()=>{u()}},[e,t,l])}const W=a.forwardRef((e,n)=>{const{flip:t,offset:s,placement:o,containerPadding:l,popperConfig:c={},transition:m,runTransition:u}=e,[f,R]=I(),[y,O]=I(),h=te(R,n),d=B(e.container),T=B(e.target),[r,v]=a.useState(!e.show),i=he(T,f,me({placement:o,enableEvents:!!e.show,containerPadding:l||5,flip:t,offset:s,arrowElement:y,popperConfig:c}));e.show&&r&&v(!1);const x=(...D)=>{v(!0),e.onExited&&e.onExited(...D)},w=e.show||!r;if(pe(f,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!w)return null;const{onExit:F,onExiting:C,onEnter:E,onEntering:_,onEntered:j}=e;let b=e.children(Object.assign({},i.attributes.popper,{style:i.styles.popper,ref:h}),{popper:i,placement:o,show:!!e.show,arrowProps:Object.assign({},i.attributes.arrow,{style:i.styles.arrow,ref:O})});return b=ne(m,u,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:b,onExit:F,onExiting:C,onExited:x,onEnter:E,onEntering:_,onEntered:j}),d?se.createPortal(b,d):null});W.displayName="Overlay";const z=a.forwardRef(({className:e,bsPrefix:n,as:t="div",...s},o)=>(n=N(n,"popover-header"),p.jsx(t,{ref:o,className:P(e,n),...s})));z.displayName="PopoverHeader";const U=a.forwardRef(({className:e,bsPrefix:n,as:t="div",...s},o)=>(n=N(n,"popover-body"),p.jsx(t,{ref:o,className:P(e,n),...s})));U.displayName="PopoverBody";function A(e,n){let t=e;return e==="left"?t=n?"end":"start":e==="right"&&(t=n?"start":"end"),t}function Q(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const ge=a.forwardRef(({bsPrefix:e,placement:n="right",className:t,style:s,children:o,body:l,arrowProps:c,hasDoneInitialMeasure:m,popper:u,show:f,...R},y)=>{const O=N(e,"popover"),h=K(),[d]=(n==null?void 0:n.split("-"))||[],T=A(d,h);let r=s;return f&&!m&&(r={...s,...Q(u==null?void 0:u.strategy)}),p.jsxs("div",{ref:y,role:"tooltip",style:r,"x-placement":d,className:P(t,O,d&&`bs-popover-${T}`),...R,children:[p.jsx("div",{className:"popover-arrow",...c}),l?p.jsx(U,{children:o}):o]})}),Re=Object.assign(ge,{Header:z,Body:U,POPPER_OFFSET:[0,8]}),V=a.forwardRef(({bsPrefix:e,placement:n="right",className:t,style:s,children:o,arrowProps:l,hasDoneInitialMeasure:c,popper:m,show:u,...f},R)=>{e=N(e,"tooltip");const y=K(),[O]=(n==null?void 0:n.split("-"))||[],h=A(O,y);let d=s;return u&&!c&&(d={...s,...Q(m==null?void 0:m.strategy)}),p.jsxs("div",{ref:R,style:d,role:"tooltip","x-placement":O,className:P(t,e,`bs-tooltip-${h}`),...f,children:[p.jsx("div",{className:"tooltip-arrow",...l}),p.jsx("div",{className:`${e}-inner`,children:o})]})});V.displayName="Tooltip";const ye=Object.assign(V,{TOOLTIP_OFFSET:[0,6]});function Oe(e){const n=a.useRef(null),t=N(void 0,"popover"),s=N(void 0,"tooltip"),o=a.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(n.current){if(H(n.current,t))return Re.POPPER_OFFSET;if(H(n.current,s))return ye.TOOLTIP_OFFSET}return[0,0]}}}),[e,t,s]);return[n,[o]]}function we(e,n){const{ref:t}=e,{ref:s}=n;e.ref=t.__wrapped||(t.__wrapped=o=>t(S(o))),n.ref=s.__wrapped||(s.__wrapped=o=>s(S(o)))}const Y=a.forwardRef(({children:e,transition:n=$,popperConfig:t={},rootClose:s=!1,placement:o="top",show:l=!1,...c},m)=>{const u=a.useRef({}),[f,R]=a.useState(null),[y,O]=Oe(c.offset),h=G(m,y),d=n===!0?$:n||void 0,T=oe(r=>{R(r),t==null||t.onFirstUpdate==null||t.onFirstUpdate(r)});return ae(()=>{f&&c.target&&(u.current.scheduleUpdate==null||u.current.scheduleUpdate())},[f,c.target]),a.useEffect(()=>{l||R(null)},[l]),p.jsx(W,{...c,ref:h,popperConfig:{...t,modifiers:O.concat(t.modifiers||[]),onFirstUpdate:T},transition:d,rootClose:s,placement:o,show:l,children:(r,{arrowProps:v,popper:i,show:x})=>{var w;we(r,v);const F=i==null?void 0:i.placement,C=Object.assign(u.current,{state:i==null?void 0:i.state,scheduleUpdate:i==null?void 0:i.update,placement:F,outOfBoundaries:(i==null||(w=i.state)==null||(w=w.modifiersData.hide)==null?void 0:w.isReferenceHidden)||!1,strategy:t.strategy}),E=!!f;return typeof e=="function"?e({...r,placement:F,show:x,...!n&&x&&{className:"show"},popper:C,arrowProps:v,hasDoneInitialMeasure:E}):a.cloneElement(e,{...r,placement:F,arrowProps:v,popper:C,hasDoneInitialMeasure:E,className:P(e.props.className,!n&&x&&"show"),style:{...e.props.style,...r.style}})}})});Y.displayName="Overlay";function Ee(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function L(e,n,t){const[s]=n,o=s.currentTarget,l=s.relatedTarget||s.nativeEvent[t];(!l||l!==o)&&!ce(o,l)&&e(...n)}ie.oneOf(["click","hover","focus"]);const ke=({trigger:e=["hover","focus"],overlay:n,children:t,popperConfig:s={},show:o,defaultShow:l=!1,onToggle:c,delay:m,placement:u,flip:f=u&&u.indexOf("auto")!==-1,...R})=>{const y=a.useRef(null),O=G(y,re(t)),h=le(),d=a.useRef(""),[T,r]=ue(o,l,c),v=Ee(m),{onFocus:i,onBlur:x,onClick:w}=typeof t!="function"?a.Children.only(t).props:{},F=g=>{O(S(g))},C=a.useCallback(()=>{if(h.clear(),d.current="show",!v.show){r(!0);return}h.set(()=>{d.current==="show"&&r(!0)},v.show)},[v.show,r,h]),E=a.useCallback(()=>{if(h.clear(),d.current="hide",!v.hide){r(!1);return}h.set(()=>{d.current==="hide"&&r(!1)},v.hide)},[v.hide,r,h]),_=a.useCallback((...g)=>{C(),i==null||i(...g)},[C,i]),j=a.useCallback((...g)=>{E(),x==null||x(...g)},[E,x]),b=a.useCallback((...g)=>{r(!T),w==null||w(...g)},[w,r,T]),D=a.useCallback((...g)=>{L(C,g,"fromElement")},[C]),Z=a.useCallback((...g)=>{L(E,g,"toElement")},[E]),M=e==null?[]:[].concat(e),k={ref:F};return M.indexOf("click")!==-1&&(k.onClick=b),M.indexOf("focus")!==-1&&(k.onFocus=_,k.onBlur=j),M.indexOf("hover")!==-1&&(k.onMouseOver=D,k.onMouseOut=Z),p.jsxs(p.Fragment,{children:[typeof t=="function"?t(k):a.cloneElement(t,k),p.jsx(Y,{...R,show:T,onHide:E,flip:f,placement:u,popperConfig:s,target:y.current,children:n})]})};export{ke as O,Re as P,ye as T,U as a};
